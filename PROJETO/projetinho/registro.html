<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta htpp-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Projeto Integrador - Home</title>
    <link rel="stylesheet" href="./styles/style.css">
    <script>
        function getRegistrado(boleano) {
            let params = new URLSearchParams(window.location.search);
            return params.get(boleano);
        }

        const status = getRegistrado('status'); // Verifica se o parâmetro 'status' está presente

        if (status === 'success') {
            window.alert("Registro realizado com sucesso!");
        } else if (status === "usuarioExiste") {
            window.alert("Login já existente!");
        }
    </script>
    <style>
        .fundo_gif {
            background-image: url('./assets/fundo.gif');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            background-attachment: fixed;
        }
    </style>
</head>

<body class="fundo_gif">

    <header class="cabecalho">
        <nav class="cabecalho__menu">
            <ul class="cabecalho__menu">
                <li><a class="menu__links" href="index.html">Home</a></li>
                <li><a class="menu__links__destaque" href="login.html">Login</a></li>
                <li><a class="menu__links" href="contatos2.html">Contatos</a></li>
            </ul>
        </nav>
    </header>
    <main class="apresentacao">
        <div class="container">
            <form class="registro" id="registro" method="post" action="./funcoes/registro.php">
                <h1>Registre-se</h1>

                <div class="registro__campo">
                    <label>Nome:</label>
                    <input type="text" required placeholder="Digite seu nome" id="txtNome" name="nomeUsuario" />
                </div>

                <div class="registro__campo">
                    <label>Login:</label>
                    <input type="text" required placeholder="Digite seu nick" id="txtLogin" name="loginUsuario"
                        maxlength="18" />
                </div>

                <div class="registro__campo">
                    <label>Senha:</label>
                    <input type="password" required id="txtSenha" name="senhaUsuario" placeholder="Digite sua senha"
                        minlength="8" maxlength="18" />
                </div>

                <button type="submit">Registrar-se</button>
            </form>
            <script>
                // Validar formulário de registro
                document.getElementById('registro').addEventListener('submit', function(event) {
                    var login = document.getElementById('txtLogin').value;  // Valor do login
                    var nome = document.getElementById('txtNome').value;  // Valor do nome
                    var senha = document.getElementById('txtSenha').value; // Valor da senha

                    // Verifica se o login contém espaços
                    if (login.includes(' ')) {
                        alert('O login não pode conter espaços!');
                        event.preventDefault();  // Impede o envio do formulário
                        return; // Finaliza a execução do script
                    }

                    // Verifica se o nome contém caracteres inválidos (apenas letras e espaços são permitidos)
                    var validarnome = /^[a-zA-Z\s]+$/;  // Expressão regular para letras e espaços
                    if (!validarnome.test(nome)) {
                        alert("O nome só pode conter letras e espaços!");
                        event.preventDefault();  // Impede o envio do formulário
                        return;
                    }

                    // Verifica se o nome contém espaços consecutivos (mais de um espaço seguido)
                    if (nome.includes('  ')) {
                        alert('O nome não pode ter espaços duplos!');
                        event.preventDefault();  // Impede o envio do formulário
                        return;
                    }

                    // Verifica se o nome tem menos de 3 caracteres
                    if (nome.length < 3) {
                        alert('O nome deve ter pelo menos 3 caracteres!');
                        event.preventDefault();  // Impede o envio do formulário
                        return;
                    }

                    // Se tudo estiver correto, o formulário será enviado
                });
            </script>

        </div>
    </main>
    <footer>
        <div class="rodape">
            <p>&copy; 2024 Trabalho Estácio. Direitos reservados.</p>
        </div>
    </footer>

</body>

</html>
